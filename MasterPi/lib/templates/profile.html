{% extends 'layout.html' %}

{% block title %}Profile{% endblock %}

{% block content %}
<h2>Profile Page</h2>
<div>
    <p>Your account details are below:</p>
    <table>
        <tr>
            <td>ID:</td>
            <td>{{ session['userid'] }}</td>
        </tr>
        <tr>
            <td>Username:</td>
            <td>{{ session['username'] }}</td>
        </tr>
        <tr>
            <td>Name:</td>
            <td>{{ session['name'] }}</td>
        </tr>
        <tr>
            <td>Email:</td>
            <td>{{ session['email'] }}</td>
        </tr>
    </table>
</div>
<br>
<hr>
<div>

            <div>
                {% for each in bookings: %}
                    {% if each['bookingstatus'] == 1: %}
                    <hr>
                    <p> Up Coming bookings</p>
                        <form action="{{ url_for('site.bookingcancel') }}" method="post" autocomplete="off">
                        <table>
                            <tr>
                                <td>Booking Date: </td>
                                <td>{{ each.bdate }}</td>
                            </tr>
                            <tr>
                                <td>Booked Car: </td>
                                <td>{{ each.carid}}</td>
                            </tr>
                            <tr>
                                <td>Start Time: </td>
                                <td>{{ each.stime}}</td>
                            </tr>
                            <tr>
                                <td>End Time: </td>
                                <td>{{ each.etime}}</td>
                            </tr>
                            <tr>
                                <td>Booking Unlock Code:  </td>
                                <td>{{ each.bookingcode }}</td>
                            </tr>
                            <input hidden name ="bookingid" id="bookingid" value ='{{ each.bookingid }}'>
                            <input type="submit" value="Book">
                        </form>
                        </table>
                        
                    {% elif each['bookingstatus'] == 3: %}
                        <p>Previous Booking</p>
                        <table>
                            <tr>
                                <td>Booking Date: </td>
                                <td>{{ each.bdate }}</td>
                            </tr>
                            <tr>
                                <td>Booked Car: </td>
                                <td>{{ each.carid}}</td>
                            </tr>
                            <tr>
                                <td>Start Time: </td>
                                <td>{{ each.stime}}</td>
                            </tr>
                            <tr>
                                <td>End Time: </td>
                                <td>{{ each.etime}}</td>
                            </tr>
                            <tr>
                                <td>Booking Unlock Code:  </td>
                                <td>{{ each.bookingcode }}</td>
                            </tr>
                            </table>
                    {% endif %}
                <br>
                {% endfor %}

            </div>

</div>

{% endblock %}